<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>gform application</title>

    <!-- Bootstrap -->
    <link href="/oss/cms4apps-site/target/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/oss/cms4apps-site/target/components-font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/oss/cms4apps-site/target/highlight/styles/github.css">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel='stylesheet' href='/oss/cms4apps-site/target/assets/css/main.css'></style>
    
  </head>
  <body>
        <nav class="navbar navbar-default">
         <div class="container-fluid">
         <!-- Brand and toggle get grouped for better mobile display -->
         <div class="navbar-header">
         <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
         <span class="sr-only">Toggle navigation</span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
         </button>
         <a class="navbar-brand" href="/oss/cms4apps-site/target/index.html">home</a>
         </div>
        
         <!-- Collect the nav links, forms, and other content for toggling -->
         <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
         <ul class="nav navbar-nav">
         <li ><a href="/oss/cms4apps-site/target/cms4apps.html">cms4apps</a></li>
         <li ><a href="/oss/cms4apps-site/target/mongomat.html">Mongomat</a></li>
         <li class="active"><a href="/oss/cms4apps-site/target/gform-app.html">gform application</a></li>
         </div><!-- /.navbar-collapse -->
         </div><!-- /.container-fluid -->
        </nav>
<div class="container"/>
<div class="row">
    <div class="col-md-9" style="position:relative">
        <h1>gform application</h1>
        <p></p>
            <h2 id="nav_0" class=" page-header">1. Introduction</h2>
            
<div class=" sections.0.blocks.0">
    <p> A framework to create administrative uis such as database clients or cms.
 Supports creation of master and detail views based on schemas. Also supports
 creation of schemas in the ui, which is the essential ingredient to create a cms.</p>

</div>
<style>
    .carousel{
        background-color:gray;
    }
    .item.item {
        margin-left:10%;
        margin-top:5%;
        width:80%;
   }
    .description {
        margin-top:5%;
        margin-bottom:50px;
        color:white;
    }
</style>
<div id="myCarousel" class="carousel slide" data-ride="carousel">
  <!-- Wrapper for slides -->
  <div class="carousel-inner" role="listbox">
    <div class="item active">
      <div>
        <img class="img-responsive" src="/oss/cms4apps-site/target/assets/images/cms4apps_example.png" alt="">
      </div>    
      <div  style="height:120px" class="description">
        <h3>cms4apps</h3>
        <p><p>This is the <em>page</em> view of cms4apps. 
On the left is the tree of pages. 
In the center is the page preview. 
On the right is the content editor. 
cms4apps has 4 stores for page, template, partial template and files.</p>
</p>
      </div>
    </div>
    <div class="item ">
      <div>
        <img class="img-responsive" src="/oss/cms4apps-site/target/assets/images/static_example.png" alt="">
      </div>    
      <div  style="height:120px" class="description">
        <h3>static example</h3>
        <p><p>The simplest example consists of a master and detail view
and a single store.</p>
</p>
      </div>
    </div>
    <div class="item ">
      <div>
        <img class="img-responsive" src="/oss/cms4apps-site/target/assets/images/dynamic_example.png" alt="">
      </div>    
      <div  style="height:120px" class="description">
        <h3>dynamic example</h3>
        <p><p>This is the <em>store</em> view of the dynamic example. 
Stores and schemas can be added and removed.
Stores are associated with one or more schemas.
In this case the store has two schemas
and the type discriminator property is called <em>type</em>.</p>
</p>
      </div>
    </div>
    
      <!-- Indicators -->
  <ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0"  class="active"></li>
        <li data-target="#myCarousel" data-slide-to="1"  ></li>
        <li data-target="#myCarousel" data-slide-to="2"  ></li>
  </ol>



  </div>

  <!-- Left and right controls -->
  <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>            <h2 id="nav_1" class=" page-header">2. examples</h2>
            
<div class=" sections.1.blocks.0">
    <h3 id="applications">applications</h3>
<p><strong>mongomat</strong></p>
<p>An admin ui for mongodb 
This is an example of the dynamic resources approach. Stores and schemas can be created and modified at runtime.
<a title="null"href="/oss/cms4apps-site/target/mongomat.html">more..</a></p>
<p><strong>cms4apps</strong></p>
<p>A cms that supports different deployment scenarios: Github pages, mongodb or any 
dynamically typed store with a restful interface.
<a title="null"href="/oss/cms4apps-site/target/cms4apps.html">more..</a></p>
<p><strong>mongoose admin example</strong></p>
<p>An example of how to create an admin ui for <a title="null"href="http://mongoosejs.com/">mongoose</a> (<a title="null"href="http://github.com/stemey/mongoose-administration-example">More</a>).
This is an example of the static resources approach. All stores and schemas are defined externally and do not
change.</p>
<h3 id="demos">demos</h3>
<p>The following examples use localstorage to persist data. Check them out in the browser</p>
<p><strong><a href="http://toobop.net/gform-app/static.html" target="_blank">static</a></strong></p>
<p>A simple example a single store with a single static schema:</p>
<p><strong><a title="null"href="http://toobop.net/gform-app/cms.html">cms4apps</a></strong></p>
<p>A cms that uses handlebars for rendering.</p>
<p>An example of a single store with its documents forming a tree structure. Documents are individually associated to schemas
by a discriminator property. Each schema has a template. The gui provides a tree view, a preview and a details editor. </p>
<p><strong><a href="http://toobop.net/gform-app/dynamic.html" target="_blank">dynamic</a></strong></p>
<p>An example of a dynamic resource factory, which provides a way to dynamically create new schemas and stores.</p>

</div>            <h2 id="nav_2" class=" page-header">3. use cases</h2>
            <p>gform applications provide a way to quickly create an administrative ui for
data stores. Different stores can be managed in a single application.
Hence it is possible to manage cms content and RDBMS data in the same ui.</p>

<div class="">
    <h3 id="subnav_2_0">3.1 supported stores</h3>
<div class=" sections.2.blocks.0.blocks.0">
    <h4 id="file">file</h4>
<p>A file system is supported via the node server <a title="null"href="/oss/cms4apps-site/targetasd.html">asd</a>.
The id property is the path and is changeable. The data is cached in the client. 
Queries are executed on the cached data. The store supports tree functionailty via
the <code>gform-app/util/tree/PathObjectStoreModel</code>. Folders are also entities in this store.</p>
<table class="table table-bordered table-striped">
<thead>
<tr>
<th>property</th>
<th>name</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>path</td>
<td>changeable</td>
</tr>
<tr>
<td>parentProperty</td>
<td>parent</td>
<td>unchangeable</td>
</tr>
</tbody>
</table>

</div><div class=" sections.2.blocks.0.blocks.1">
    <h4 id="github-api">github api</h4>
<p>This store is very similar to the file store. It requires 
Oauth authentication.</p>

</div><div class=" sections.2.blocks.0.blocks.2">
    <h4 id="localstorage">localstorage</h4>
<p>The localstorage store is useful for demonstration purposes.
A predefined dataset is loaded into local storage and can be manipulated in 
the browser.</p>
<p>The store provides tree functionality via a name and parentProperty
property. A path is generated on save via concatenation of parent and name.</p>
<table class="table table-bordered table-striped">
<thead>
<tr>
<th>property</th>
<th>name</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>id (autoincrement)</td>
</tr>
</tbody>
</table>

</div><div class=" sections.2.blocks.0.blocks.3">
    <h4 id="mongodb">mongodb</h4>
<p>MongoDb is a dynamically typed store that organizes json documents in collections.
Each collection has an id called _id.</p>
<p>A tree functionality can be achieved by using name and property or 
adding a path property.</p>
<table class="table table-bordered table-striped">
<thead>
<tr>
<th>property</th>
<th>id</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>_id</td>
</tr>
</tbody>
</table>

</div></div>            <h2 id="nav_3" class=" page-header">4. domain model</h2>
            <p>The domain model explains how gform applications are
composed of entities, stores and schemas.</p>

<div class="">
    <h3 id="subnav_3_0">4.1 entity</h3>
<div class=" sections.3.blocks.0.blocks.0">
    <p>Entities are json documents. An entity is contained in a store.  An entity has an  id that is unique across all entities in its store. Each entity conforms to a schema.</p>

</div></div><div class="">
    <h3 id="subnav_3_1">4.2 store</h3>
<div class=" sections.3.blocks.1.blocks.0">
    <p>A store provides access to entities.
Stores have a simple api and can be used to access data from different systems:
browser stores like IndexDB, LocalStorage or server side stores providing access via restful services.</p>
<p>There are two types of stores. First, there are stores whose entities all
conform to the same schema. Second, there are stores whose entity
conform to the schema identified by the value of their type discriminator property
called typeProperty. The schemas associated with these stores are
stored in a so-called templateStore.</p>

</div><div class=" center-block caption-fix">
    <img src="http://www.plantuml.com/plantuml/img/PLB1IiGm4BtFLmnxga9B3vwATFUYu4tG7yWsOpUGfZMP8aNzTwScNRDh3e7tvkNDv2M7mChpF5W8dRA4TtMD7qRp2Q2pAWGanuON_0IKTMzq2zzRQPWjcy2ZfrJcPQ9dFqxaUMami3UkN-MPi6mn26ifmWQPXiagffSLRywv95adMMwRj9dAw7_j8_qga-tF76aZXnvL9xie7t88ucbwfuwMdlI-EOwZ9UMWEodNqpNR4nT6tpIWj2vYKWAccV_0-qn-ANvtGPeiCSKpYEibulYtPOcxkghSBWL-6LhvrSPxGfvCHf_3w4uqA4b3dDFBLPRUk4eLk39eD_wYMukRKPEc0ZYGq_9DVW00" class="center-block img-responsive" alt="" />
    <div class="caption">
        <p >The class diagram for store and schema</p>
    </div>
</div>
<div class=" sections.3.blocks.1.blocks.2">
    <p>Stores are an extension of <code>dojo/store</code> and have the following properties (in addition to the ones defined by <code>dojo/store</code>):</p>
<table class="table table-bordered table-striped">
<thead>
<tr>
<th>name</th>
<th>description</th>
<th style="text-align:center">required</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>the store identifier</td>
<td style="text-align:center">x</td>
</tr>
<tr>
<td>idProperty</td>
<td>the name of the property that holds the primary key - inherited from &#39;dojo/store&#39;.</td>
<td style="text-align:center">x</td>
</tr>
<tr>
<td>idType</td>
<td>the type of the idProperty. Used to generate a default schema for a store.</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td>typeProperty</td>
<td>the property which holds the type discriminator</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td>templateStore</td>
<td>provides the schemas for this store</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td>template</td>
<td>if all entities have the same type this is the type discriminator</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td>assignableId</td>
<td>whether or not the user may initially set the id</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td>changeableId</td>
<td>if true then the user has to pick the id and can change it. Usually this is used for file based stores. The id is the path of the file.</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td>editorFactory</td>
<td>defines the binding of schemas and its attributes to widgets. Also defines actions like &quot;save&quot;, &quot;delete&quot;, &quot;discard&quot; that are displayed in the detail editor.</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td>mainStore?</td>
<td>there can be a special store for gettin the master data. When the details are loaded they will be loaded from the mainStore.</td>
</tr>
<tr>
<td>previewerId</td>
<td>When an entity of this store is focusses and the previewerId is set then the previewer will display the entity.</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<p>Either the store has a template property or both a typeProperty and the templateStore property.</p>
<p>A store provides functions to create, update, read, query and delete entities. Stores use promises as return values for
asynchronuos access but fallback to simple valus for synchronuos access.</p>
<h4 id="read-a-single-entity-by-id">Read a single entity by id</h4>
<p>Deading a single entity by its id is done via <code>store.get(id)</code>. The implementation is pretty straight forward and the
result is the entity itself.</p>
<h4 id="delete-a-single-entity-by-id">Delete a single entity by id</h4>
<p>Deleting a single entity is done via <code>store.delete(id)</code>. The return value is unimportant.</p>
<h4 id="update-a-single-entity">Update a single entity</h4>
<p>Updating is done via <code>store.put(entity)</code>. The id is taken from the entity. The return value is usually not important.
Their are cases where version information or similar things are updated in the entity as well. This change is currently not
visible after saving an updated entity.</p>
<h4 id="create-an-entity">Create an entity</h4>
<p>Creating an entity is done via <code>store.add(entity)</code>. The return value is either the generated id or the updated entity. In either case
the entity is reloaded to reflect all changes.</p>
<h4 id="query-entities">Query entities</h4>
<p>This is the function that needs the most work when connecting to a new data store. The function is <code>store.query(query,options)</code>.
See documentation on parameter <a title="null"href="/oss/cms4apps-site/targetdojotoolkit.html">here</a>. The dojo store abstraction is not perfect in this regard. Usually
there are two kinds of queries that the store implementor needs to take into consideration. One is issued by <code>dijit/FilteringSelet</code>
and the other by <code>gridx/Grid</code>. <strong>TODO</strong>: more on implementing your own store </p>
<h4 id="tree">tree</h4>
<p>A store can contain a tree of entities (See <a title="null"href="/oss/cms4apps-site/targetdojotoolkit.html">here</a>). There are two ways to implement this behavior in gform-app.
Either all entities except the root have a parent identified by its id. Then the store needs to provide a <code>parentProperty</code>. Or the id of the
ntities is also their path in the tree.</p>

</div></div><div class="">
    <h3 id="subnav_3_2">4.3 schema</h3>
<div class=" sections.3.blocks.2.blocks.0">
    <p>A schema defines the attributes (properties) an entity can or must have. 
These schemas are usually gform schema documents that are perfect to create
a form to edit instances. 
Schemas can allow additional dynamic properties that are not restricted by the schema.</p>
<p>Schemas can either be stored as simple json files or linked json files.</p>
<h4 id="simple-json-files">simple json files</h4>
<p>This schema has a single attribute called <em>name</em> of type <em>string</em>. The
editor in the form is a rich text editor.</p>
<pre><code class="lang-json">{
  &quot;editor&quot;:&quot;listpane&quot;,
  &quot;attributes&quot;:[
     {
        &quot;code&quot;:&quot;name&quot;,
        &quot;type&quot;:&quot;string&quot;,
        &quot;editor&quot;:&quot;richtext&quot;
     }
  ]
}
</code></pre>
<h4 id="linked-json-files">linked json files</h4>
<p>A schema can be composed of more than one json file. The easiest way to include
another schema is by using an object with a single property <code>$ref</code> whose value points to the
the external schema. The whole object replaced by the referenced json document.</p>
<pre><code class="lang-json">{
  &quot;attributes&quot;:[
     {
        &quot;code&quot;:&quot;embedded&quot;,
        &quot;type&quot;:&quot;object&quot;,
        &quot;group&quot;:{&quot;$ref&quot;:&quot;./embedded-schemas.json&quot;}
     }
  ]
}
</code></pre>
<p>To create the schema object from these json files:</p>
<pre><code class="lang-javascript">// require &#39;gform/util/Resolver&#39;
var resolver = new Resolver();
var schemaPromise = resolver.resolve(schema);
schemaPromise.then(function () {
  // schema is now modified
})
</code></pre>
<p>There are actually more involved ways to create a schema from a set of linked json files.</p>
<h4 id="store">store</h4>
<p> Schemas can be stored in a store. Each store has a name and the schemas are identified by <code>&lt;storeName&gt;/&lt;schemaId&gt;</code>.</p>
<pre><code class="lang-javascript">var promise = schemaRegistry.get(&quot;mySchemas/schema1&quot;);
</code></pre>
<h4 id="gform-schema-editor">gform schema editor</h4>
<p>Schemas can also be created by the user in the gform application.
An editor for a schema is generated from a meta schema which describes
what attributes and groups are available and how they are displayed.</p>
<p>There is a standard set of json files that describe all groups and attributes
available in gform. These can be composed filtered and extended to create
the ideal meta schema.</p>

</div><div class=" center-block caption-fix">
    <img src="/oss/cms4apps-site/target/assets/images/gform-app/schema-editor.png" class="center-block img-responsive" alt="" />
    <div class="caption">
        <p >The template editor in cms4apps contains an editor for the content type.
On the left is the tree of properties and embedded types. On the right are the details 
of the selected properties.</p>
    </div>
</div>
</div>            <h2 id="nav_4" class=" page-header">5. application architecture</h2>
            
<div class="">
    <h3 id="subnav_4_0">5.1 views</h3>
<div class=" sections.4.blocks.0.blocks.0">
    <p>Each store is associated with a view. A view
usually consists of the following:</p>
<ul>
<li>a set of actions available in the toolbar.</li>
<li>a master view which is either a grid or a tree or both.</li>
<li>a detail view which is usually a tab container displaying all open entities.</li>
<li>optionally a previewer foor the currently selected entity.</li>
</ul>
<p>Views can be switched via the view menu in the toolbar.</p>

</div><div class=" center-block caption-fix">
    <img src="/oss/cms4apps-site/target/assets/images/view.png" class="center-block img-responsive" alt="" />
    <div class="caption">
        <p >The page view which of cms4apps.</p>
    </div>
</div>
</div><div class="">
    <h3 id="subnav_4_1">5.2 widgets</h3>
<div class=" sections.4.blocks.1.blocks.0">
    <p>The frontend is composed of dojo widgets. 
Some widgets change their appearance when a view is
switched.</p>
<h4 id="bordercontainer">BorderContainer</h4>
<p>The root widget is a BorderContainer which displays
a toolbar on top.
Below the toolbar there are three regions that can be occupied by different 
widgets. The regions are left, right and center. left and right have a fixed width and center
takes up the rest of the space. Hence there must always be a center widget.</p>
<p>The definition which widget occupies which region is defined individually for each
view. Widgets may also be hidden for a certain view.</p>
<h4 id="toolbar">Toolbar</h4>
<p>The Toolbar provides actions for the entities of the current view. The most common
is the create or add action which creates a new entity in the current view&#39;s store.
If the applicationhas more than one store than the view menu should be included as well.
Actions can be hidden or shown depending on the current view.</p>
<h4 id="storeview">StoreView</h4>
<p>The store view is a widget that provides an individual master view for each store.
The master view is created and populated by the current view&#39;s entities on demand. 
If an node in a tree or a row in a grid is selected the 
corresponding entity is usually displayed in the TabOpener an the Previewer.</p>
<h4 id="tabopener">TabOpener</h4>
<p>The TabOpener is a tab container and displays the details of the open entities. 
When an entity is focussed it will be added 
to the TabContainer. The user removes entities from the container manually.</p>
<h4 id="previewer">Previewer</h4>
<p>The previewer is usually only visible for certain views.
The previewer renders the currently selected entity. 
A store can be associated with a previewer.</p>

</div><div class=" center-block caption-fix">
    <img src="http://www.plantuml.com/plantuml/img/TP6zRiCm38HtFONc0W6S1yYI34c7eW4IT9UjYwr0a0oQQOQYxru9ZMWXFvl0--v8aLDdFFIoQHfzTPO75TipEjRhI1QqYO6D2o3zetvLqOun-jRa6g5tCQmuZbc-zxmj5eKLxuPW6EiBSmp_eIKjqxKgbY-7wmV2vH4lYXBsm96GomdMj-ayJlngFE4bOMzw70aIelMKcNUx6fEIS-OUEQ7c9MIBrC3uBJbxotdmtI7p5_Q4xrH0jTyEWK7L1NOcM8-qXgccn_9Emmv2PDjCvTPFt4-NCwjoUTD-ZWZrREJwuULwXLVg3m00" class="center-block img-responsive" alt="" />
    <div class="caption">
        <p >A widget tree example</p>
    </div>
</div>
</div><div class="">
    <h3 id="subnav_4_2">5.3 components</h3>
<div class=" sections.4.blocks.2.blocks.0">
    <p>The application consists of a set of components that provide access to stores, schemas and entities.</p>

</div><div class=" center-block caption-fix">
    <img src="http://www.plantuml.com/plantuml/img/TLAxRiCm3Dpr5HpbeaRs30MAJ5qReBigiOu1sJBqI1iK_VUAacmf1h8Ov96yErAMMZW7hyjoChF77m-_39mt5jyK70xWBmWoM8kprpVuCZ8uXoftCBYE-Es0mO3-b9lELE3T7VOHktYNa5mULSo4KclsdFaYQ74oLzowCirPNd0I9QUnDOzpAUmQ-27dWsha9t-ErvYN_JFjwZxJK0PfWJ_6PBfTPdx7ONJUtkX-aOS7gzCGeMWftTp6BSBSLfh6R70M4rQBjRbMatxpQdt_iZToB7ehiFabahtTz2IRf_P0ZTMozbxsZk-O1wjeKKs7Ys80ewAl5f-eAIY_4i1WJLXs_4zzdoRPFm00" class="center-block img-responsive" alt="" />
    <div class="caption">
        <p >The components of a gform application</p>
    </div>
</div>
<div class=" sections.4.blocks.2.blocks.2">
    <h4 id="appcontext">AppContext</h4>
<p>The appContext is made available to all widgets during construction.
All stores and schemas are available via the AppContext.
The AppContext also manages the current navigation state which is the currently selected entity and store.</p>

</div><div class=" sections.4.blocks.2.blocks.3">
    <h4 id="storeregistry">StoreRegistry</h4>
<p>All stores are available via the storeRegistry.
The stores can be added and removed to the storeRegistry at runtime.</p>

</div><div class=" sections.4.blocks.2.blocks.4">
    <h4 id="schemaregistry">SchemaRegistry</h4>
<p>The schemaRegistry provides access to all schemas.
Schemas can be added and removed from it at runtime.</p>
<table class="table table-bordered table-striped">
<thead>
<tr>
<th>method</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>get(id)</td>
<td>get schema by id</td>
</tr>
<tr>
<td>register(id, schema)</td>
<td>register a schema</td>
</tr>
<tr>
<td>unregister(id)</td>
<td>unregister schema</td>
</tr>
<tr>
<td>registerStore(name,store)</td>
<td>register a store that contains schemas. A schema&#39;s id is <code>store.name+&quot;/&quot;+entityId</code></td>
</tr>
<tr>
<td>unregisterStore(name)</td>
<td>unregister a store that contains schemas</td>
</tr>
</tbody>
</table>
<p>To retrieve an entity&#39;s schema there are two ways:</p>
<ol>
<li><p>All entities in the store have the same type.
<code>store.template</code>is the id of the schema. To retrieve it use <code>schemaRegistry.get(id)</code>. SchemaRegistry
is a registry for all schemas that is available via the glabal AppContext object.</p>
</li>
<li><p>The store contains entities of different types.
 An entity&#39;s type is defined by its typeProperty. The name of the typeProperty is retrieved from <code>store.typeProperty</code>.
To retrieve the the schema from the schemaRegistry you need to prefix the typeProperty&#39;s value with <code>store.templateStore</code>.</p>
</li>
</ol>
<pre><code class="lang-javascript">var promise = appContext.getSchema(store.templateStore+&quot;/&quot;+entity[store.typeProperty];
// equivalent to
var promise = appContext.getStore(store.templateStore).get(entity[store.typeProperty])
</code></pre>
<p>The stores that contain schemas are special stores in that the get method
will not only return the stored json assuming its a schema. If the schema includes
links to external schemas then these will be loaded and the schemas will be substituted for the links.
This is done recursively.</p>

</div><div class=" sections.4.blocks.2.blocks.5">
    <h4 id="resourcefactories">ResourceFactories</h4>
<p>ResourceFactories are a way to create a set of stores and schemas from a single external configuration
or store. The stores&#39; views are dynamically created by a StoreViewController rather than individually
configured.</p>
<h5 id="static-resourcefactory">Static ResourceFactory</h5>
<p>A static resourceFactory loads a description of stores and schemas from a store. This can be used to
create a client a statically typed server-side store. 
An example is the administration for <a href="http://www.mongooosejs.com" target="_blank">mongoosejs</a> (<a href="https://github.com/stemey/mongoose-administration-example" target="_blank">more..</a>).</p>
<h5 id="dynamic-resourcefactory">Dynamic Resourcefactory</h5>
<p>A dynamic ResourceFactory loads stores and schemas like the static alternative. 
But it is possible to modify stores and schemas at runtime. Typically this is used
to create clients for dynamically typed server-side stores. An example is <a title="null"href="/oss/cms4apps-site/target/mongomat.html">mongomat</a></p>

</div></div><div class="">
    <h3 id="subnav_4_3">5.4 configuration</h3>
<div class=" sections.4.blocks.3.blocks.0">
    <p>The application is setup and configured in a quasi declarative way. 
All components and widgets are created by factories which take javascript objects as input.
The type of object created by the factory is usually one of the properties. The rest of the properties
are often simply passed to its constructor.
The main responsibility of the factories is to put together parent child relations.
Also the factories load amd modules dynamically.</p>
<p>Here is an example of how to create the configuration object for a storeRegistry.
The factordId and the storeClass are used to create the store. 
Both are amd modules that are loaded dynamically.</p>
<pre><code class="lang-javascript">return {
    &quot;storeRegistry&quot;: {
        &quot;stores&quot;: [
            {
                &quot;factoryId&quot;: &quot;gform-app/factory/DstoreFactory&quot;,
                &quot;storeClass&quot;: &quot;dstore/RequestMemory&quot;,
                &quot;template&quot;: &quot;static&quot;,
                &quot;name&quot;: &quot;static&quot;,
                &quot;idProperty&quot;: &quot;id&quot;,
                &quot;dstoreConfig&quot;: {
                    &quot;target&quot;: &quot;gform-app/example/static/data.json&quot;
                }
            }
        ]
}

`
</code></pre>

</div></div><div class="">
    <h3 id="subnav_4_4">5.5 messages</h3>
<div class=" sections.4.blocks.4.blocks.0">
    <p>The loosely coupled components and widgets in gform-app communicate via <code>dojo/topic</code> messages.</p>
<h4 id="entity">entity</h4>
<p>these messages handle entities.</p>
<table class="table table-bordered table-striped">
<thead>
<tr>
<th>message</th>
<th>event</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>/focus</td>
<td>storeName,id, source, template</td>
<td>an entity was selected (e.g. in a grid or in a detail tab container).</td>
</tr>
<tr>
<td>/new</td>
<td>storeName, schemaUrl, source, value</td>
<td>open an editor for a new entity (e.g. a toolbar button publishes this event to open a new editor)</td>
</tr>
<tr>
<td>/deleted</td>
<td>storeName, id, entity?, source</td>
<td>an entity was deleted.</td>
</tr>
<tr>
<td>/updated</td>
<td>storeName, id ,entity?, oldEntity?,  source</td>
<td>an entity was updated.</td>
</tr>
<tr>
<td>/added</td>
<td>storeName, id , entity, source</td>
<td>an new entity was persisted.</td>
</tr>
<tr>
<td>/modify/update</td>
<td>storeName, id, value</td>
<td>an entity was changed but its changes are not persisted yet. This event is used by peviewers to display the transient state.</td>
</tr>
<tr>
<td>/modify/cancel</td>
<td>storeName, id</td>
<td>an entity&#39;s editing session was cancelled.</td>
</tr>
</tbody>
</table>
<h4 id="store">store</h4>
<p>these messages handle stores.</p>
<table class="table table-bordered table-striped">
<thead>
<tr>
<th>message</th>
<th>event</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>/store/focus</td>
<td>store, source</td>
<td>a store was selected.</td>
</tr>
<tr>
<td>/store/new</td>
<td>store, source</td>
<td>a new stored was persisted.</td>
</tr>
<tr>
<td>/store/deleted</td>
<td>store, entity, source</td>
<td>a store was deleted.</td>
</tr>
<tr>
<td>/store/updated</td>
<td>store, entity?, oldEntity?, source</td>
<td>a store was updated.</td>
</tr>
</tbody>
</table>
<h4 id="attribute">attribute</h4>
<p>A gform detail editor publishes messages. This can be used to link
the navigation state in the detail editor with the one of the preview.</p>
<table class="table table-bordered table-striped">
<thead>
<tr>
<th>message</th>
<th>event</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>/attribute/focus</td>
<td>path, source</td>
<td>An attribute in the detail editor was focussed. The path to the attribute is available.</td>
</tr>
</tbody>
</table>

</div></div><div class="">
    <h3 id="subnav_4_5">5.6 examples</h3>
<div class=" sections.4.blocks.5.blocks.0">
    <p>Here are some examples how messages are used to drive the ui.</p>
<h4 id="create-a-new-entity">create a new entity</h4>
<p>The toolbar button &quot;add&quot; publishes a <code>/new</code> event. The <code>TabOpener</code> is subscribed to the message and creates a new tab with 
 a corresponding editor.</p>
<h4 id="select-an-entity">select an entity</h4>
<p>The grid and Tab components publish <code>focus</code> events when a new entity is selected/focussed. The TabOpener is also  subscribed to 
 the message. The Tab Opener opens an editor. The BorderContainer that displays a whole view switches to the view that is associated with the 
 entity&#39;s store.</p>
<h4 id="live-preview">live preview</h4>
<p>A previewer can be used to display a view for an entity that is being modified. One example is an entity that is a gform schema itself. The schemaPreviewer which 
displays the editor described by the gform schema. Another example is a entity that has an associated handlebars template.
The Previewer will render the template with the entity as the input data. 
To provide an update to the rendered view based while the user changes the entity but beofre it is saved the previwer listens to <code>/modify/update</code>
messages. </p>

</div></div>            <h2 id="nav_5" class=" page-header">6. project</h2>
            
<div class=" sections.5.blocks.0">
    <p>the project is hosted on github. <a title="null"href="http://github.com/stemey/gform-app">more..</a></p>
<h3 id="installation">installation</h3>
<pre><code class="lang-sh">git clone www.github.com/stemey/gform-app
cd gform-app
bower install
</code></pre>
<p>open browser to load examples: /src/gform-app/examples/?.html</p>
<p>to optimize te javascript:</p>
<pre><code class="lang-sh">npm install
grunt build
</code></pre>
<p>open browser to load examples: /dist/gform-app/examples/?.html</p>
<h3 id="test">Test</h3>
<pre><code class="lang-sh">grunt test
</code></pre>
<p>open in browser: /node_modules/intern/client.html?config=src/gform-app/tests/intern</p>

</div>    </div>
    <div class="col-md-3">
        <nav id="navigation" class="bs-docs-sidebar affix">
            <ul class="nav bs-docs-sidenav">
                <li>
                    <a href="#nav_0">Introduction</a>
                    <ul class="nav">
                        <li>
                            <a href="#subnav_0_0"></a>
                        </li>
                        <li>
                            <a href="#subnav_0_1"></a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#nav_1">examples</a>
                    <ul class="nav">
                        <li>
                            <a href="#subnav_1_0"></a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#nav_2">use cases</a>
                    <ul class="nav">
                        <li>
                            <a href="#subnav_2_0">supported stores</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#nav_3">domain model</a>
                    <ul class="nav">
                        <li>
                            <a href="#subnav_3_0">entity</a>
                        </li>
                        <li>
                            <a href="#subnav_3_1">store</a>
                        </li>
                        <li>
                            <a href="#subnav_3_2">schema</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#nav_4">application architecture</a>
                    <ul class="nav">
                        <li>
                            <a href="#subnav_4_0">views</a>
                        </li>
                        <li>
                            <a href="#subnav_4_1">widgets</a>
                        </li>
                        <li>
                            <a href="#subnav_4_2">components</a>
                        </li>
                        <li>
                            <a href="#subnav_4_3">configuration</a>
                        </li>
                        <li>
                            <a href="#subnav_4_4">messages</a>
                        </li>
                        <li>
                            <a href="#subnav_4_5">examples</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#nav_5">project</a>
                    <ul class="nav">
                        <li>
                            <a href="#subnav_5_0"></a>
                        </li>
                    </ul>
                </li>
            </ul>
        </nav>
    </div>
</div>
    
    <footer class="footer">
        <p>created with cms<span style="color:red">4</span>apps</p>
    </footer>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="/oss/cms4apps-site/target/jquery/dist/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="/oss/cms4apps-site/target/bootstrap/dist/js/bootstrap.js"></script>
    <script src="gform-app/controller/mock.js"></script>
    <script>$('body').scrollspy({ target: '#navigation' })</script>
  </body>
</html>